<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Not's Demonology Guide</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="demonology" content="This page is dedicated to information 
        pertaining to the Demonology Warlock Specialization in World of Warcraft" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="Demo_Styles.css" rel="stylesheet" type="text/css" />
    <script src="js/xbbcode.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://static-azeroth.cursecdn.com/current/js/syndication/tt.js"></script>
</head>
<body class="guide-html">
    <main id="toc">
        <section id="guide" class="container"></section>
    </main>
    <script>
        // Guide goes here
        var guide = `[CENTER][IMG]http://i.imgur.com/qA3c5cW.png[/IMG][/CENTER]

[B]What does this stat do?[/B]

Haste - Haste is your strongest stat as a Destruction Warlock. Haste provides the largest overall boost in Soul Shard generation due to more Immolate ticks and a lower cooldown of Conflagrate. Obviously more Shards = more Chaos Bolts = more damage.

Crit - Crit is your second best stat and this comes in second due to also attributing to your Soul Shard generation. Immolate crits have doubled chance of generating a Soul Shard. Also your Critical Strike makes your Chaos Bolt hit harder as this spell is a guaranteed crit already.

Versatility/Mastery - Both of these stats have kind of the same effect. Versatility grants you a constant percentage damage increase and Mastery makes your spells deal up to a percentage extra damage. This means Mastery can be really bad, but also make your spells hit very hard. However Versatility is generally better as it gives you more consistency between pulls. Mastery will average out over numerous attempts, but you will still be able to see the dps you do vary depending on your mastery quite a bit if running high Mastery.

Obviously the precise stat weights are gonna vary a lot depending on your gear, talents and obviously the fight itself. This segment of the guide is just made to give you a general idea of what stats you should be aiming for.

[CENTER][B]TL;DR - Intellect => Haste > Crit > Versatility > Mastery[/B][/CENTER]`;
        
        // convert bb to html
        var guideHtmlTag = document.getElementById('guide');

        var urlPattern = /^(?:https?|file|c):(?:\/{1,3}|\\{1})[-a-zA-Z0-9:;,@#%&()~_?\+=\/\\\.]*$/;

        XBBCODE.addTags(   
            {
            "jumpto": {
                openTag: function(params,content) {
                    var url = (params) ? params.replace(/=/g, '') : '';
                    return '<a href="#'+url+'">';
                },
                closeTag: function(params,content) {
                    return '</a>';
                }
            },
            "indent": {
                openTag: function(params,content) {
                    return '<div style="margin-left:40px">';
                },
                closeTag: function(params,content) {
                    return '</div>';
                }
            },
            "anchor": {
                openTag: function(params, content){
                    return '<a name="'+content+'">';
                },
                closeTag: function(params, content){
                    return '</a>';
                },
                displayContent: false
            },
            "blizzquote": {
                openTag: function(params, content){
                    return '<div class="blizz_container"> <div class="blizz_icon">Originally Posted by Blizzard Entertainment</div>';
                },
                closeTag: function(params, content){
                    return '</div>';
                }
            },
            "collapse":{
                openTag: function(params, content){
                    var newID =  Math.ceil(Math.random()*30000);
                    return '<a href="#" class="ExpandBtn">Expand</a><div class="expand">';
                },
                closeTag: function(params, content){
                    return '</div>';
                }
            },
            "color": {
                openTag: function(params, content){
                     var param = (params) ? params.replace(/="/g, '') : '';
                    return '<span style="color: '+param+'" >';
                },
                closeTag: function(params, content){
                    return '</span>';
                }
            },
            "left": {
                openTag: function(params, content){
                     var param = (params) ? params.replace(/="/g, '') : '';
                    return '<div style="float: left" >';
                },
                closeTag: function(params, content){
                    return '</div>';
                }
            },
            "right": {
                openTag: function(params, content){
                     var param = (params) ? params.replace(/="/g, '') : '';
                    return '<div style="float: right" >';
                },
                closeTag: function(params, content){
                    return '</div>';
                }
            },
            "centre": {
                openTag: function(params, content){
                     var param = (params) ? params.replace(/="/g, '') : '';
                    return '<center>';
                },
                closeTag: function(params, content){
                    return '</center>';
                }
            },
            "bold": {
                openTag: function(params, content){
                     var param = (params) ? params.replace(/="/g, '') : '';
                    return '<em>';
                },
                closeTag: function(params, content){
                    return '<em>';
                }
            },
            "italic": {
                openTag: function(params, content){
                     var param = (params) ? params.replace(/="/g, '') : '';
                    return '<i>';
                },
                closeTag: function(params, content){
                    return '<i>';
                }
            },
            "underline": {
                openTag: function(params, content){
                     var param = (params) ? params.replace(/="/g, '') : '';
                    return '<u>';
                },
                closeTag: function(params, content){
                    return '<u>';
                }
            },
            "url": {
                openTag: function(params, content){
                var myUrl;

                if (!params) {
                    myUrl = content.replace(/<.*?>/g, "");
                } else {
                    myUrl = params.substr(1);
                }

                urlPattern.lastIndex = 0;
                if (!urlPattern.test(myUrl)) {
                   myUrl = myUrl.replace(/"/g, '')
                }

                return '<a href="' + myUrl + '">';
                },
                closeTag: function(params, content){
                    return '</a>';
                }
            }
        }
        );
  
        var convertedBBtoHtml = XBBCODE.process({
            text: guide,
            removeMisalignedTags: false,
            addInLineBreaks: true
        });


        // add to html
        guideHtmlTag.innerHTML = convertedBBtoHtml.html;


        //Expand and collapse
        $(".ExpandBtn").on('click', function(){

            if($(this).text()=='Expand'){
                $(this).next().animate({height: '100%'});
                $(this).text('Colapse');
            }else{
                $(this).next().animate({height: 10});
                $(this).text('Expand');
            }

             return false;
        });

    </script>
</body>
</html>
